{{!-- Sidebar will stay in the main outlet, everything
  else will stay in sidebar's outlet --}}

<div id="sidebar-toggle" {{action "openSidebar"}}>
  <i class="fa fa-arrow-circle-right"></i>
</div>

<div id="stabilization-info">
    <div class="cssload-loader">stabilizing {{stabilizationPercent}}%</div>
    {{!--<div class="align-center"><b>--}}
        {{!--Stabilizing network: {{stabilizationPercent}}%--}}
    {{!--</b></div>--}}
  {{!--<div class="ember-load-indicator" style="margin-top: 300px;">--}}
    {{!--<div class="demo">--}}
      {{!--<svg class="loader">--}}
        {{!--<circle cx="75" cy="75" r="60" fill="transparent" stroke="#F4F519" stroke-width="6" stroke-linecap="round" stroke-dasharray="385" stroke-dashoffset="385" filter="url(#blur)"></circle>--}}
      {{!--</svg>--}}
      {{!--<svg class="loader loader-2">--}}
        {{!--<circle cx="75" cy="75" r="60" fill="transparent" stroke="#DE2FFF" stroke-width="6" stroke-linecap="round" stroke-dasharray="385" stroke-dashoffset="385" filter="url(#blur)"></circle>--}}
      {{!--</svg>--}}
      {{!--<svg class="loader loader-3">--}}
        {{!--<circle cx="75" cy="75" r="60" fill="transparent" stroke="#FF5932" stroke-width="6" stroke-linecap="round" stroke-dasharray="385" stroke-dashoffset="385" filter="url(#blur)"></circle>--}}
      {{!--</svg>--}}
      {{!--<svg class="loader loader-4">--}}
        {{!--<circle cx="75" cy="75" r="60" fill="transparent" stroke="#E97E42" stroke-width="6" stroke-linecap="round" stroke-dasharray="385" stroke-dashoffset="385" filter="url(#blur)"></circle>--}}
      {{!--</svg>--}}
      {{!--<svg class="loader loader-5">--}}
        {{!--<circle cx="75" cy="75" r="60" fill="transparent" stroke="white" stroke-width="6" stroke-linecap="round" filter="url(#blur)"></circle>--}}
      {{!--</svg>--}}
      {{!--<svg class="loader loader-6">--}}
        {{!--<circle cx="75" cy="75" r="60" fill="transparent" stroke="#00DCA3" stroke-width="6" stroke-linecap="round" stroke-dasharray="385" stroke-dashoffset="385" filter="url(#blur)"></circle>--}}
      {{!--</svg>--}}
      {{!--<svg class="loader loader-7">--}}
        {{!--<circle cx="75" cy="75" r="60" fill="transparent" stroke="purple" stroke-width="6" stroke-linecap="round" stroke-dasharray="385" stroke-dashoffset="385" filter="url(#blur)"></circle>--}}
      {{!--</svg>--}}
      {{!--<svg class="loader loader-8">--}}
        {{!--<circle cx="75" cy="75" r="60" fill="transparent" stroke="#AAEA33" stroke-width="6" stroke-linecap="round" stroke-dasharray="385" stroke-dashoffset="385" filter="url(#blur)"></circle>--}}
      {{!--</svg>--}}
    {{!--</div>--}}
  {{!--</div>--}}
</div>

<div id="network-container" style="height: {{height}}px;">

  {{outlet}}

  <div class="crop-fake">
    <div class="go-back-crop" {{action "toggleCrop" on="click"}}>
      {{fa-icon 'crop' size=1}}
    </div>
    <!--<div class="crop-box-fake"></div>-->
  </div>

  {{#if model}}
    {{#if network.selectedNodes}}
      {{#if network.selectedNodes.length}}
        {{#each network.selectedNodes as |node|}}
          {{box-details
              graphElementType='node'
              graphElementId=node
              networkModel=model
              id="box-details-container"
              network=network
              networkService=networkService
          }}
        {{/each}}
      {{/if}}
    {{else}}
      {{#if network.selectedEdges}}
        {{#if network.selectedEdges.length}}
          {{#each network.selectedEdges as |edge|}}
            {{box-details
                graphElementType='edge'
                graphElementId=edge
                networkModel=model
                id="box-details-container"
                network=network
                networkService=networkService
            }}
          {{/each}}
        {{/if}}
      {{/if}}
    {{/if}}
    <div id="network-controls">
      <a class="vis-button" {{action "modalNetworkLink" on="click"}}>
        {{fa-icon 'link' size=1}}
        <div class="tooltip"> Get link </div>
      </a>
      <a class="vis-button" {{action "stopPhysics" on="click"}}>
        {{fa-icon 'cogs'}}
        <div class="tooltip"> Stop movement </div>
      </a>
      <a class="vis-button" {{action "showClustering" on="click"}}>
        {{fa-icon 'database' size=1}}
        <div class="tooltip"> Merge nodes </div>
      </a>
      <a class="vis-button" {{action "toggleCrop" on="click"}}>
        {{fa-icon 'crop' size=1}}
        <div class="tooltip"> Export image </div>
      </a>

    </div>
    {{#if networkLinkModal}}
    <div id="modalNetworkLink" >
      <div class="modal-container">
        <span {{action "modalNetworkLink" on="click"}}>
          {{fa-icon 'close' size=1 class="close"}}
        </span>
        <div class="modal-content">
          <div class="input-field col s6">
            <input value="{{networkLink}}" id="network-link"
                   type="text" autofocus onFocus="this.select()" onclick="this.select()" onblur="this.focus()">
          </div>
        </div>
      </div>
    </div>
    {{/if}}

    {{#if networkClusteringModal}}
      {{network-clustering
          action="closeClustering"
          class="clustering"
          networkService = networkService
          notifications = notifications
      }}
    {{/if}}
    {{#if networkEmbeddingModal}}
      {{network-embedding
          canvas = visCanvas
          action="closeEmbedding"
          class="embeding"
          networkService = networkService
          notifications = notifications
          networkId = model.id
      }}
    {{/if}}

    {{#visjs-network
      options=networkOptions
      nodesSet=networkService.nodes
      edgesSet=networkService.flaggedEdges
      startStabilizingAction=(action 'startStabilizing')
      stabilizationIterationsDoneAction=(action 'stabilizationIterationsDone')
      stabilizedAction=(action 'stabilized')
      stabilizationProgressAction=(action 'stabilizationProgress')
      storeAs=network
      selectedNodes=selectedNodes
      selectedEdges=selectedEdges
    }}
    {{/visjs-network}}

  {{/if}}

</div>

<div class="crop-controls">
  <div class="modal-container">
    <div class="modal-content">
      <div class="row">
        <span {{action "closeCrop" on="click"}}>
          {{fa-icon 'close' size=1 class="close"}}
        </span>
      </div>


      <div class="row">
        <div class="col s4">
          <small>width</small>
          <div class="small" style="margin-top: 0px !important;">
            {{input type="text" value=cropWidth id="canvasWidth"}}
          </div>
        </div>
        <div class="col s4">
          <small>height</small>
          <div class="small" style="margin-top: 0px !important;">
            {{input type="text" value=cropHeight id="canvasHeight"}}
          </div>
        </div>
        <div class="col s4">
          <a id="downloadLnk" class="btn-small primary" download="YourFileName.png"  >
            Save image
          </a>
        </div>
      </div>

    </div>
  </div>
</div>
