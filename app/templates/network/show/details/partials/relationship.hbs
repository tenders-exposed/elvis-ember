<div class="detailview-head">

  <div class="detailview-title">
    <span class="figure-relationship small"></span> Relationship<br>
  </div>

  <div class="close" {{action "closeDetails"}}>
    {{fa-icon 'times-circle'}}
  </div>

</div>

<div class="detailview-body-wrapper">
  {{#ember-scrollable}}

    <div class="detailview-body">

      <h5 class="detailview-restriction">
        Displaying Period: <strong>{{modelDetails.firstYear}} - {{modelDetails.lastYear}}</strong>
      </h5>

      <section>
        <br><br>
        <h5>Actors</h5>
        <div>
          <span class="figure-buyer small"></span>
          {{#link-to "network.show.details.show" "buyers" modelDetails.from}}
            {{modelDetails.fromLabel}}
          {{/link-to}}
        </div>
        <div>
          <span class="figure-bidder small"></span>
          {{#link-to "network.show.details.show" "bidders" modelDetails.to}}
            {{modelDetails.toLabel}}
          {{/link-to}}
        </div>

        {{!--<div class="tags">
          {{#each-in modelDetails.to.flags as |flName flValue|}}
            <span class="tag redflag"><i class="fa fa-flag"></i> {{flName}}</span>
          {{/each-in}}
        </div>--}}
      </section>

      <section class="row">
        <div class="col s4 summary">
          <h5 class="summary-title">Bids awarded</h5>
          <div class="summary-value">{{format-amount modelDetails.numberOfWinningBids}}</div>
        </div>
        <div class="col s4 summary">
          <h5 class="summary-title">All awarded amounts</h5>
          <div class="summary-value">{{format-amount modelDetails.amountOfMoneyExchanged}}</div>
        </div>
        <div class="col s3 summary">
          <h5 class="summary-title">Awarded amount unknown in</h5>
          <div class="summary-value">{{format-amount modelDetails.percentValuesMissing '0,0.0'}} % <small>tenders</small></div>
        </div>
      </section>

      <section>
        <div class="contracts-top-table">
          <h5>Contracts</h5>
          {{#if (or (gte modelDetails.pag.totalPages 2) (gte limitPage 10))}}
            <div class="no-contracts">
              <span class="label-no-contracts">
                Displaying
              </span>
              {{md-select content=limitContractsPage
                          value=limitPage
                          optionLabelPath="content.label"
                          optionValuePath="content.value" }}
            </div>
          {{/if}}
          {{#if (gte modelDetails.pag.totalPages 2)}}
            <div class="contractsPages">
              {{#if (gte modelDetails.pag.page 2)}}
                <a href="#"{{action "page" "first"}}>
                  {{fa-icon 'backward' size=1 class="arrow-page-limit"}}
                </a>
                &nbsp;
                <a href="#"{{action "page" "back"}}>
                  {{fa-icon 'caret-left' size=1 class="arrow-page"}}
                </a>
                &nbsp;
              {{/if}}

              {{modelDetails.pag.page}} / {{modelDetails.pag.totalPages}}

              {{#if (gt modelDetails.pag.totalPages modelDetails.pag.page)}}
                &nbsp;
                <a href="#"{{action "page" "next"}}>
                  {{fa-icon 'caret-right' size=1 class="arrow-page"}}
                </a>
                &nbsp;
                <a href="#"{{action "page" "last"}}>
                  {{fa-icon 'forward' size=1 class="arrow-page-limit"}}
                </a>
              {{/if}}
            </div>
          {{/if}}
        </div>

        {{details-data-table
          class="contracts-table"
          loadingContracts= loadingContracts
          content=modelDetails.contracts
          sort=sort
          fields=fields.contractsRelationship
          partialPath="network/show/details/partials/tables/contracts-relationship"
          route="relationships"
          nodeId=params.id
          componentTable="contracts-relationship"
        }}
      </section>

    </div>
  {{/ember-scrollable}}
</div>

