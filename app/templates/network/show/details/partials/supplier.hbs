<div class="detailview-head">
  <div class="detailview-title">
    <span class="figure-bidder small"></span> Bidder Company details<br>
  </div>

  <div class="close" {{action "closeDetails"}}>
    {{fa-icon 'times-circle'}}
  </div>

</div>

<div class="detailview-body-wrapper">
  {{#ember-scrollable}}

    <!-- TODO: replace old variables and hardcoded data by the new backend data:
            https://digiwhist.docs.apiary.io/#reference/0/master-tenders/get-tender

            note that most of variables which are used here are from the old backend or just not working!
            -->

    <div class="detailview-body">

      <h5 class="detailview-restriction">
        Displaying Period: <strong>{{modelDetails.firstYear}} - {{modelDetails.lastYear}}</strong>
      </h5>

     {{!-- <section class="external-links">
        <a class="btn-small link primary" href="http://opented.eu">view on opentender.eu <i class="fa fa-external-link"></i></a>
      </section>--}}

      <section>
        <h5>Name</h5>
        <h2>{{modelDetails.label}}</h2>

        <div class="tags">
          {{#each modelDetails.countries as |country|}}
            <span class="tag">
              {{world-flag country 16}} {{country}}
            </span>
          {{/each}}

          {{#each-in modelDetails.flags as |flName flValue|}}
            <span class="tag redflag"><i class="fa fa-flag"></i> {{flName}}</span>
          {{/each-in}}

        </div>
      </section>

      <section class="row">
        <div class="col s2 summary">
          <h5 class="summary-title">Bids awarded</h5>
          <div class="summary-value">{{format-amount modelDetails.numberOfWinningBids}}</div>
        </div>
        <div class="col s3 summary">
          <h5 class="summary-title">All awarded amounts</h5>
          <div class="summary-value">{{format-amount modelDetails.amountOfMoneyExchanged}}</div>
        </div>
        <div class="col s4 summary">
          <h5 class="summary-title">Awarded amount unknown in</h5>
          <div class="summary-value">{{format-amount modelDetails.percentValuesMissing '0,0.0'}} % <small>tenders</small></div>
        </div>

        <div class="col s3 summary">
          <h5 class="summary-title">AVG. Competition</h5>
          <div class="summary-value">
          {{#if modelDetails.medianCompetition}}
            {{modelDetails.medianCompetition}} <small>bids per tender</small>
          {{else}}
            <small>value unknown</small>
          {{/if}}
          </div>
        </div>
      </section>

      <section>
        <h5>Contracts</h5>
        {{#if (gte modelDetails.pag.totalPages 2)}}
          <div class="contractsPages">
            {{#if (gte modelDetails.pag.page 2)}}
              <a href="#"{{action "page" "back"}}>
                {{fa-icon 'caret-left'}}
              </a>
            {{/if}}

            {{modelDetails.pag.page}} / {{modelDetails.pag.totalPages}}

            {{#if (gt modelDetails.pag.totalPages modelDetails.pag.page)}}
              <a href="#"{{action "page" "next"}}>
                {{fa-icon 'caret-right' }}
              </a>
            {{/if}}
          </div>
        {{/if}}

        {{details-data-table
            class="contracts-table"
            loadingContracts= loadingContracts
            content=modelDetails.contracts
            fields=fields.contracts
            sort=sort
            route="bidders"
            nodeId=modelDetails.id
            componentTable="contracts-supplier"
        }}
      </section>

    </div>
  {{/ember-scrollable}}
</div>
