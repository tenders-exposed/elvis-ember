<div id="cpv-container" class="mainbg">
  <div class="row">
    <div class="col s6 offset-s1">
      <h4>Selected fields by CPV code</h4>
      <small>
        Here you can select fields you wish to include into the visualisation.
        <br>
        To find out mode about CPV code, <a href="#">click here</a>
      </small>
    </div>
    <div class="col s4 right-align">
      <br>
        <span style="margin-right: 5px; font-size: 13px"><b>BACK</b></span>
          {{md-btn
             icon='fa fa-arrow-left'
             action='toggleModal'
             buttonType='floating'
             class=' white grey-text text-darken-4'
          }}
    </div>
  </div>
  <div class="row">
    <div class="col s1">&nbsp;</div>
    <div class="col s10 cpv-table-container">
      <div class="toggled {{if showSelected 'show-container'}}">
         <div class="row">
           {{md-btn
               text='View tree'
               icon='fa fa-edit'
               action='toggleSelectedCodesModal'
               class='grey darken-3'
           }}
           {{#if selectedCodes}}
             <h4>Selected codes: <small>({{selectedCodesCount}} contracts)</small></h4>
           {{/if}}
           <br>
           <div class="cpv-selector-selected-codes-container">
             {{#perfect-scroll scrollTop=100 includePadding=true suppressScrollX=true}}
             <ul class="selected-cpvs">
             {{#if refresh}}
               {{#each selectedCodes as |selected|}}
                 {{cpv-selected
                       cid=selected.id
                       unique='selector'
                       title=selected.title
                       selectedCodes=selectedCodes
                       jsTree=jsTree
                       name=selected.original.name
                       doc_count=selected.original.doc_count
                       count=selected.original.count
                 }}
               {{/each}}
             {{/if}}
             </ul>
             {{/perfect-scroll}}
           </div>
         </div>
      </div>
      <div class="toggled {{unless showSelected 'show-container'}}">
        <div class="search">
          <form onsubmit="return false;">
          {{input type="text"
                  placeholder="search for keyword of CPV code.."
                  class="search-input form-control"
                  value=searchTerm
          }}
          {{md-btn text='search'
                   icon='fa fa-search'
                   action='searchCpv'
                   class='grey darken-3'
                   isDisabled=isDisabled
          }}
          </form>
          {{#if selectedCodes}}
            {{md-btn
                text='Review'
                icon='fa fa-edit'
                action='toggleSelectedCodesModal'
                class='grey darken-3'
            }}
          {{/if}}
        </div>
        <div class="cpv-tree">
          {{#perfect-scroll scrollTop=100 includePadding=true suppressScrollX=true}}
           <div class="jstree-default-dark-small">
             {{ember-jstree
                 data=cpvs
                 plugins=config.plugins
                 themes=config.core.themes
                 selectedNodes=selectedCodes
                 searchOptions=config.searchOptions
                 actionReceiver=jsTree
                 searchTerm=searchTree
             }}
           </div>
           {{/perfect-scroll}}
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col s12">
      <br>
      {{#md-btn action="toggleModal" class="cpv-ok-button"}}
        OK
      {{/md-btn}}
    </div>
  </div>
</div>
